# ShortLink 

Сервис, предоставляющий API по созданию сокращённых ссылок.

# Как запустить:
Сервис использует .env для конфиденциальных данных. В качестве примера оставил его в репо. Также используется Docker, POST, GET Методы, PostgreSQL для ДБ.

## Процесс запуска:
```
1. docker compose up -d --build
```
С помощью docker-compose и dockerfile, создается среда Go и PostgreSQL. У приложения два эндпоинта:

```
1.1 POST localhost:8085/http://example.com/ 
1.2 GET localhost:8085/{shortlink}
```
С помощью них можно получить нужный результат. Вместо http://www.example.com можно вставить любую ссылку. Главное включать "http". Или же использовать curl:
```
2. curl -X POST -H "Content-Type: application/json" -d '{"url":"http://www.example.com"}/' localhost:8085/shorten
```
Пример использования с curl. Вместо http://www.example.com можно вставить любую ссылку. Главное включать "http".

3. Хранилише переключается с помощью параметра -storage. Допустимыми параметрами являются memory и postgres
3.1. Параметр запуска находится в dockerfile в команде "CMD".

4. Тесты можно выполнить внутри контейнера. 
```
docker exec -it <container> bash
go test ./tests 
```

# Вопросы по поводу оценки.
1) **Как генерируются ссылки, почему предложенный алгоритм будет работать; насколько он соответствует задаче и насколько легко его понять:**
   - Ссылки генерируются с использованием случайной строки символов латинского алфавита (строчные и заглавные), цифр и символа подчеркивания. Функция `generateShortLink` генерирует случайную строку заданной длины (в данном случае, 10 символов) с использованием определенного набора символов. Этот алгоритм гарантирует уникальность из-за случайности сгенерированных строк. Алгоритм хорошо соответствует требованиям задачи, так как он создает уникальные ссылки указанной длины и набора символов. Реализация проста и понятна, так как она просто генерирует случайную строку из заданного набора символов.

2) **Как распределены типы по файлам, файлы по пакетам и пакеты по приложению: структура проекта:**
   - Типы хорошо распределены по файлам и пакетам. Например, в предоставленном коде типы, связанные с хранением данных в базе данных (`MemoryStorage`, `PostgresStorage`), определены в пакете `db`, в то время как типы, связанные с обработкой HTTP-запросов (`Handler`), определены в пакете `handler`. Это разделение ответственности делает код модульным и легким для управления. Файлы организованы в соответствующих пакетах, а пакеты организованы логически в соответствии с их функциональностью в приложении.

3) **Как обрабатываются ошибки в различных сценариях использования:**
   - Ошибки обрабатываются с помощью встроенного механизма обработки ошибок Go (`error` значения). Функции возвращают ошибки, когда что-то идет не так, и вызывающий код проверяет эти ошибки и обрабатывает их соответственно с использованием условных операторов (`if err != nil`). Например, операции с базой данных возвращают ошибки, если запросы завершаются неудачей или если требуемый ресурс не найден. Сообщения об ошибках содержат описательную информацию и предоставляют полезную информацию для отладки.

4) **Насколько удобен и логичен сервис для использования:**
   - Сервис предоставляет удобный API для сокращения и расширения URL-адресов. Структура `Handler` инкапсулирует логику обработки HTTP-запросов, что делает его легким в использовании и понимании. Разделение ответственности между логикой обработки HTTP и логикой хранения (`Storage` интерфейс) улучшает модульность и поддерживаемость. Пользователи могут взаимодействовать с сервисом через стандартные HTTP-запросы, что делает его простым в интеграции с другими системами.

5) **Как сервис будет вести себя, если его одновременно будут использовать сотни человек:**
   - Сервис должен масштабироваться хорошо, если его будут использовать сотни человек одновременно, при условии, что базовая инфраструктура (например, сервер базы данных) сможет обрабатывать нагрузку. Поскольку сервис является безсостоятельным и не сохраняет данные сеанса для конкретного клиента, он может обрабатывать одновременные запросы от нескольких клиентов без проблем. Однако производительность может ухудшиться, если количество одновременных запросов превысит мощность сервера или если будут созданы узкие места в базе данных или сети.

6) **Что произойдет, если сервис будет работать очень долго:**
   - Если сервис будет работать длительное время, он должен продолжать работать нормально, при условии, что не будет утечек памяти или истощения ресурсов. Сборщик мусора Go управляет выделением и освобождением памяти, обеспечивая, чтобы неиспользуемая память периодически освобождалась. Однако важно мониторить сервис на предмет любых аномалий, таких как утечки памяти, избыточное использование ресурсов или другие проблемы производительности со временем.
